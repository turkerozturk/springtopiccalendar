<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!--
    This file is part of the DailyTopicTracker project.
    Please refer to the project's README.md file for additional details.
    https://github.com/turkerozturk/springtopiccalendar
    -->
    <meta charset="UTF-8">

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">

    <title>Intelligent Report - Daily Topic Tracker</title>

    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">

    <link rel="stylesheet" type="text/css" th:href="@{/webjars/font-awesome/css/all.min.css}">





    <style>

        .css-archived {
          background-color: LightGray !important;
       }

        .negative-weighted-entry {
            background-color: #e6ccff; /* Açık mor tonu */
        }
        .normal-weighted-entry {
            background-color: #ccffe6;
        }
        .positive-weighted-entry {
            background-color: #ffe6cc;
        }

        .highlight-today {
            background-color: #fff9c4; /* açık sarı */
        }



        body {
      margin: 0px;
  }

  #navigation-panel button, a{
    margin-bottom: 5px;
        margin-top:5px;

    border-radius:10px !important;
}


  #navigation-panel button, a{
    border-radius:10px !important;
  }


    #navigation-panel {
     max-width: 640px;
     margin-top: 10px;
     margin-bottom: 5px;
     margin-left: auto;
     margin-right: auto;
     padding: 3px;
     border: 2px solid DarKGray;
     border-radius: 7px 7px 7px 7px;

     /* https://cssgradient.io/ */

     background: #a7d6e8;
     background: linear-gradient(90deg, rgba(203, 231, 242, 0.50) 0%, rgba(203, 242, 206, 1) 33%, rgba(242, 209, 203, 1) 66%, rgba(209, 209, 209, 0.50) 100%);
  }




    .align-center-horizontal {
       max-width: fit-content;
                  margin-left: auto;
                  margin-right: auto;
    }




     /* offcanvasdaki topic listesi iceren tablo asagi dogru cok uzamasin diye scrollbar gosterir gerektiginde. */
    .scrollable-topics-table {
      max-height: 600px;      /* ~20 satırlık yükseklik, ihtiyaca göre ayarlayın */
      overflow-y: auto;       /* dikey kaydırma */
      /* isterseniz yatay kaydırma da istemiyorsanız overflow-x: hidden; ekleyin */
    }


.fonbg {
            background: linear-gradient(90deg, rgba(203, 231, 242, 0.50) 0%, rgba(203, 242, 206, 1) 33%, rgba(242, 209, 203, 1) 66%, rgba(209, 209, 209, 0.50) 100%);
        }

/* https://www.computerhope.com/htmcolor.htm#color-codes */
/* https://www.htmltables.io/blog/html-table-borders */
  #status-table {
    background-color: rgba(0, 0, 0, 0.3) !important;
         border: 3px solid  black;
  border-collapse: separate;

    }
    .#status-table td,
    #status-table th{
        border: 1px solid black;
        white-space: nowrap;
    }
     #status-table th{
        color: WhiteSmoke;
    }
    .normal-table-row{
         background-color: white;

    }



/* https://css-pattern.com/cubes-illusion/ */
 body {
  --s: 300px; /* control the size*/
  --c1: #5e8c6a;
  --c2: #bfb35a;

  --_s: calc(2*var(--s)) calc(2*var(--s));
  --_g: 35.36% 35.36% at;
  --_c: #0000 66%,var(--c2) 68% 70%,#0000 72%;
  background:
    radial-gradient(var(--_g) 100% 25%,var(--_c)) var(--s) var(--s)/var(--_s),
    radial-gradient(var(--_g) 0    75%,var(--_c)) var(--s) var(--s)/var(--_s),
    radial-gradient(var(--_g) 100% 25%,var(--_c)) 0 0/var(--_s),
    radial-gradient(var(--_g) 0    75%,var(--_c)) 0 0/var(--_s),
    repeating-conic-gradient(var(--c1) 0 25%,#0000 0 50%) 0 0/var(--_s),
    radial-gradient(var(--_c)) 0 calc(var(--s)/2)/var(--s) var(--s)
    var(--c1);
}
          .entry-with-content {
              color: blue !important;
              font-weight:bold;
          }


          #topic-name {
            white-space: nowrap;
            overflow: hidden;
            position: relative;
            max-width: 200px;
          }

          #category-name {
            white-space: nowrap;
            overflow: hidden;
            position: relative;
            max-width: 100px;
          }




                        a {
                    text-decoration: none;
                    color: inherit;
                    }

                    a:visited {
                        color: inherit;
                    }

                    a:hover {
                        color: blue;
                    }

                .centered {
                max-width: fit-content;
                  margin-left: auto;
                  margin-right: auto;
                  }

                .pivot-table-entry-cell {
                    text-align: center;      /* yatay ortalama */
                    vertical-align: middle;  /* dikey ortalama */
                    min-width: 20px;
                    min-height: 20px;

                    max-width: 20px;         /* Maksimum genişlik  */
                    max-height: 20px;         /* Maksimum genişlik  */

                    width: 20px;             /* Sabit genişlik  */
                    height: 20px;
                    padding: 0px;

                    background-color: WhiteSmoke !important;

                }

                .pivot-table-entry-cell a {
                text-decoration: none;   /* alt çizgiyi kaldır */
                color: inherit;          /* bulunduğu hücrenin rengini kullan */
                    padding: 0px;

                }

                .pivot-table-entry-cell a:visited {
                    color: inherit;          /* tıklanmış linkin rengini değiştirme */
                }

                 caption {
                    color: WhiteSmoke !important;
                }



                .status-0 {
                 /*   background-color: gainsboro !important; */
                 background: radial-gradient(circle, gainsboro 30%, rgba(255, 255, 255, 1) 100%);

                }
                .status-1 {
                   /* background-color: palegreen !important; */
                    background: radial-gradient(circle, palegreen 30%, rgba(255, 255, 255, 1) 100%);

                }
                .status-2 {
                /*    background-color: tomato !important; */
                background: radial-gradient(circle, Tomato 30%, rgba(255, 255, 255, 1) 100%);

                }
                .status-3 {
                    background-color: LightBlue !important;
                }


        a.add-new-entry {
                  color: transparent;
                  transition: color 0.3s ease;

                  min-width: 20px;
                  min-height: 20px;

                  max-width: 20px;         /* Maksimum genişlik  */
                  max-height: 20px;         /* Maksimum genişlik  */

                  width: 20px;             /* Sabit genişlik  */
                  height: 20px;
                  padding: 0px;
                }

                a.add-new-entry:hover {
                  color: black;
                  background-color:honeydew;
                  font-size: 16px;
                  font-weight: bold;

                  min-width: 20px;
                  min-height: 20px;

                  max-width: 20px;         /* Maksimum genişlik  */
                  max-height: 20px;         /* Maksimum genişlik  */

                  width: 20px;             /* Sabit genişlik  */
                  height: 20px;
                  padding: 0px;
                }

    </style>
</head>
<body>


<div  id="navigation-panel">
    <div th:replace="~{fragments/fragnavigation :: fragnavigation}"></div>
</div>

<div class="align-center-horizontal" style="margin-top:4px;">
    <h1><span class="fonbg">Intelligent Report</span>
        <span th:if="${categoryGroupId == null}" style="font-size:14pt;">(Over all Category Groups)</span>
        <span th:if="${categoryGroupId != null}" style="font-size:14pt;">(Over a Category Group)</span>
    </h1>

    <!-- thymeleaf icin "templates/" dizini root dizindir. HTML relative pathleri oradan itibaren yazmak gerekir. -->

    <h3 title="If topic weight is more than or equal to zero and category is not archived"><span class="fonbg">Items</span></h3>
    <div th:replace="~{view-intelligent/fragtable :: fragtable(${allItems})}"></div>
    <br/>


    <h3 title="If topic weight is more than or equal to zero and category is archived"><span class="fonbg">Archived Items</span></h3>
    <div th:replace="~{view-intelligent/fragtable :: fragtable(${archivedItems})}"></div>
    <br/>

    <h3 title="If topic weight is less than zero and category is not archived"><span class="fonbg">Items (Not Important)</span></h3>
    <div th:replace="~{view-intelligent/fragtable :: fragtable(${negativeWeightItems})}"></div>
    <br/>

    <h3 title="If topic weight is less than zero and category is archived"><span class="fonbg">Archived Items (Not Important)</span></h3>
    <div th:replace="~{view-intelligent/fragtable :: fragtable(${negativeWeightArchivedItems})}"></div>
    <br/>

</div>

<!-- sayfanın en altına yakın bir yere ekleyin -->
<div class="modal fade" id="noteModal" tabindex="-1" aria-labelledby="noteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="noteModalLabel">Note Detail</h5>
                &nbsp;
                <button type="button" class="btn btn-outline-secondary btn-sm" id="copyNoteBtn">Copy</button>
            </div>
            <div class="modal-body" style="white-space: pre-line;height: 600px;overflow-y:scroll;">
                <!-- HTMX ile buraya tam içerik gelecek, pre-line sayesinde satirlar yanyana degil altalta gorunuyor -->
            </div>
        </div>
    </div>
</div>

<!-- Modal yapısı weekly entry calendar icin -->
<div id="modal" class="modal text-center" style="display:none;background-color:rgba(0, 0, 0, 0.5);">
    <button onclick="document.getElementById('modal').style.display='none'"
            style="background-color:WhiteSmoke;"
    >Close</button>
    <div class="modal-content" id="modal-content">
        <!-- İçerik buraya yüklenecek -->
    </div>
</div>


<script type="text/javascript" th:src="@{/webjars/htmx.org/dist/htmx.min.js}"></script>


<script type="text/javascript"
        th:src="@{/webjars/bootstrap/5.3.5/js/bootstrap.min.js}"></script>

<!-- chart -->
<script type="text/javascript" th:src="@{/webjars/chart.js/4.5.0/dist/chart.umd.js}"></script>



<!-- Modal yapısı weekly entry calendar icin -->
<script>
    // Modal disina tıklaninca da modali kapatmak icin bu script gerekli cunku kutuphaneli bir modal kullanmadik.
    document.getElementById('modal').addEventListener('click', function (event) {
        const modalContent = document.getElementById('modal-content');
        if (!modalContent.contains(event.target)) {
            this.style.display = 'none';
        }
    });
</script>

<script>
    // HTMX olayı: içerik yüklendikten hemen sonra
    document.body.addEventListener('htmx:afterSwap', function(evt) {
      // Eğer swap hedefi modal-body içindeyse
      if (evt.detail.target.closest('#noteModal .modal-body')) {
        // Bootstrap modal’ı göster
        var modalEl = document.getElementById('noteModal');
        var modal = new bootstrap.Modal(modalEl);
        modal.show();

        // Copy butonunu bağla
        document.getElementById('copyNoteBtn').onclick = function() {
          var text = modalEl.querySelector('.modal-body').innerText;
          navigator.clipboard.writeText(text)
            .then(() => {/* dilerseniz kullanıcıya bildirim gösterin */});
        };
      }
    });
</script>

</body>
</html>
